<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title>AE1 HTML</title>
        <script src="./poi.js"></script>
</head>
<body>
       <p>Hello World!</p> 
		<label for="regionInput"> Region </label>
		<input type="text" id="inputQuery"> <br>
		<input type="submit" onclick="search()" id="sendButton" value="Submit"> <br><br>

		<div style="display: none">
		        <table>
		                <thead>
							<tr>
							        <th></th>
							        <th></th>
							        <th></th>
							        <th></th>
							        <th></th>
							        <th></th>
							        <th></th>
							        <th></th>
							</tr>
						</thead>
		                <tbody>
							<tr>
							        <td></td>
							        <td></td>
							        <td></td>
							        <td></td>
							        <td></td>
							        <td></td>
							        <td></td>
							        <td></td>
							</tr>
						</tbody>
		        </table>
		</div>
		<script>
			
			async function ajaxSearch(query) { // async with JSON
				const response = await fetch(`https://localhost:8080/poi/find/${query}`); 
				const contents = await response.json();
				let queryResults = "";
		
				contents.forEach( result => {
					queryResults += `Name: ${result.name}, Region: ${result.region}, Type: ${result.type}, Country: ${result.country}, Longitude: ${result.lon}, Latitude: ${result.lat}, Description: ${result.description} <br/>`
		});
		document.getElementById('results').innerHTML = queryResults;
}
		</script>

		<p id="results"> Results </p>	


		<label for="nameIn"> Name</label>
		<input type="text" id="nameIn"> <br>
		<label for="regionIn"> Region </label>
		<input type="text" id="regionIn"> <br>
		<label for="typeIn"> Type</label>
		<input type="text" id="typeIn"> <br>
		<label for="countryIn"> Country</label>
		<input type="text" id="countryIn"> <br>
		<label for="lonIn"> Longitude</label>
		<input type="text" id="lonIn"> <br>
		<label for="latIn"> Latitude</label>
		<input type="text" id="latIn"> <br>
		<label for="desIn"> Description</label>
		<input type="text" id="desIn"> <br>
		<input type="submit" onsubmit=saveData() id="sendIn" value="Add In!"> <br> <br>
		<script>

				async function saveData() {
						const contents = {
								name: document.getElementById("nameIn").value,
								region: document.getElementById("regionIn").value,
								type: document.getElementById("typeIn").value,
								country: document.getElementById("countryIn").value,
								lon: document.getElementById("lonIn").value,
								lat: document.getElementById("latIn").value,
								description: document.getElementById("desIn").value
						}
						console.log(contents);
						const response = await fetch(`http://localhost:8080/poi/add`, {
							method:'POST',
							headers: {
								'Content-Type': 'application/json'},
											body: JSON.stringify(contents)
										});
				}	

		</script>
</body>
</html>
